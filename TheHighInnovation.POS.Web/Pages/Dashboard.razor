@page "/admin-dashboard"
@using TheHighInnovation.POS.Web.Services.Base
@using TheHighInnovation.POS.Web.Model.Response.Dashboard
@using TheHighInnovation.POS.Web.Model.Response.Organization
@using TheHighInnovation.POS.Web.Model
@using TheHighInnovation.POS.Web.Models


<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

<div class="dashboardpage">

    <h2 class="page-heading">WELCOME TO PROXIMA</h2>

    <div class="container-fluid top-container">
        <div class="row outer-row">
            <div class="col-3 cards-left">
                <div class="rev-sec">
                    <p class="r-title">Revenue</p>
                    <p class="amt-1">RS 1234516.66</p>
                    <div class="two-btn">
                        <span class="rev-btn1">88.88%</span> <span class="rev-btn2">Rs 54321</span> <br />
                    </div>
                </div>
                <div class="rev-sec">
                    <p class="r-title">Non Operting Revenue</p>
                    <p class="amt-2">Rs 5433211.66</p>
                    <div class="two-btn">
                        <span class="rev-btn3"> 88.88%</span> <span class="rev-btn4">Rs 54321</span>
                    </div>
                </div>
            </div>

            <div class="col-9 cards_right">
                <div class="row first-row">
                    <div class="col small-cards">
                        <div class="row">
                            <div class="col-3"><i class="fa-solid fa-comments-dollar"></i></div>
                            <div class="col-6">
                                <p>Total Sale</p>
                            </div>
                            <div class="col-3"><i class="fa-solid fa-ellipsis-vertical"></i></div>
                        </div>

                        <div class="row">
                            <div class="col">room Sale</div>
                            <div class="col">RS 2000</div>
                        </div>
                        <div class="row">
                            <div class="col">Room Sale</div>
                            <div class="col">Rs 2000</div>
                        </div>
                    </div>
                    <div class="col small-cards">
                        <div class="row">
                            <div class="col-3"><i class="fa-solid fa-comments-dollar"></i></div>
                            <div class="col-6">
                                <p>Total Sale</p>
                            </div>
                            <div class="col-3"><i class="fa-solid fa-ellipsis-vertical"></i></div>
                        </div>
                        <div class="row">
                            <div class="col">room Sale</div>
                            <div class="col">RS 2000</div>
                        </div>
                        <div class="row">
                            <div class="col">Room Sale</div>
                            <div class="col">Rs 2000</div>
                        </div>
                    </div>
                    <div class="col small-cards">
                        <div class="row">
                            <div class="col-3"><i class="fa-solid fa-comments-dollar"></i></div>
                            <div class="col-6">
                                <p>Total Sale</p>
                            </div>
                            <div class="col-3"><i class="fa-solid fa-ellipsis-vertical"></i></div>
                        </div>
                        <div class="row">
                            <div class="col">room Sale</div>
                            <div class="col">RS 2000</div>
                        </div>
                        <div class="row">
                            <div class="col">Room Sale</div>
                            <div class="col">Rs 2000</div>
                        </div>
                    </div>
                    <div class="col small-cards-l">
                        <div class="row">
                            <div class="col-3"><i class="fa-solid fa-comments-dollar"></i></div>
                            <div class="col-6">
                                <p>Total Sale</p>
                            </div>
                            <div class="col-3"><i class="fa-solid fa-ellipsis-vertical"></i></div>
                        </div>
                        <div class="row">
                            <div class="col">room Sale</div>
                            <div class="col">RS 2000</div>
                        </div>
                        <div class="row">
                            <div class="col">Room Sale</div>
                            <div class="col">Rs 2000</div>
                        </div>
                    </div>
                </div>

                <div class="row second-row">
                    <div class="col small-cards">
                        <div class="row">
                            <div class="col-3"><i class="fa-solid fa-comments-dollar"></i></div>
                            <div class="col-6">
                                <p>Total Sale</p>
                            </div>
                            <div class="col-3"><i class="fa-solid fa-ellipsis-vertical"></i></div>
                        </div>
                        <div class="row">
                            <div class="col">room Sale</div>
                            <div class="col">RS 2000</div>
                        </div>
                        <div class="row">
                            <div class="col">Room Sale</div>
                            <div class="col">Rs 2000</div>
                        </div>
                    </div>
                    <div class="col small-cards">
                        <div class="row">
                            <div class="col-3"><i class="fa-solid fa-comments-dollar"></i></div>
                            <div class="col-6">
                                <p>Total Sale</p>
                            </div>
                            <div class="col-3"><i class="fa-solid fa-ellipsis-vertical"></i></div>
                        </div>
                        <div class="row">
                            <div class="col">room Sale</div>
                            <div class="col">RS 2000</div>
                        </div>
                        <div class="row">
                            <div class="col">Room Sale</div>
                            <div class="col">Rs 2000</div>
                        </div>
                    </div>
                    <div class="col small-cards">
                        <div class="row">
                            <div class="col-3"><i class="fa-solid fa-comments-dollar"></i></div>
                            <div class="col-6">
                                <p>Total Sale</p>
                            </div>
                            <div class="col-3"><i class="fa-solid fa-ellipsis-vertical"></i></div>
                        </div>
                        <div class="row">
                            <div class="col">room Sale</div>
                            <div class="col">RS 2000</div>
                        </div>
                        <div class="row">
                            <div class="col">Room Sale</div>
                            <div class="col">Rs 2000</div>
                        </div>
                    </div>
                    <div class="col small-cards-l">
                        <div class="row">
                            <div class="col-3"><i class="fa-solid fa-comments-dollar"></i></div>
                            <div class="col-6">
                                <p>Total Sale</p>
                            </div>
                            <div class="col-3"><i class="fa-solid fa-ellipsis-vertical"></i></div>
                        </div>
                        <div class="row">
                            <div class="col">room Sale</div>
                            <div class="col">RS 2000</div>
                        </div>
                        <div class="row">
                            <div class="col">Room Sale</div>
                            <div class="col">Rs 2000</div>
                        </div>
                    </div>
                </div>
            </div>


        </div>
    </div>


    @*
    =============================================================================================
    *@





    <div class="container-fluid">
        <div class="sales">
            <div class="row heading">
                <div class="col offset-3">
                    <p>SALES TRENDS</p>
                </div>
                <div class="col">
                    <div class="dropdown">
                        <div class="btn-group">
                            <button class="btn btn-secondary btn-sm dropdown-toggle" type="button"
                                data-bs-toggle="dropdown" aria-expanded="false">
                                Small button
                            </button>
                            <ul class="dropdown-menu">
                                <li>me</li>
                                <li>you</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="bar-graph">       
                <BarGraph></BarGraph>
            </div>
        </div>




    <div class="container-fluid">
        <div class="row rev-brk">

            <div class="col revenue">
                    <p class="row-heading">REVENUE BREAKDOWN</p>
                <div class="chart">
                    <ChartComponent></ChartComponent>
                </div>
            </div>

            <div class="col salesby">


                <div class="row top-row">
                   <div class="col">
                    <p class="row-heading">SALES BY</p>
                   </div>
                   <div class="offset-4 col">
                    <div class="dropdown">
                        <div class="btn-group">
                            <button class="btn btn-secondary btn-sm dropdown-toggle" type="button"
                                data-bs-toggle="dropdown" aria-expanded="false">
                                category
                            </button>
                            <ul class="dropdown-menu">
                                <li>i</li>
                                <li>my</li>
                            </ul>
                        </div>
                   </div>
                    </div>
                </div>



                <table class="table table-borderless salesby-table">
                    <tr>
                        <th>Product Name</th>
                        <th>Qty</th>
                        <th>Amount</th>
                    </tr>
                    <tr>
                        <td>Khukuri Rum</td>
                        <td>12</td>
                        <td>10500</td>
                    </tr>

                    <tr>
                        <td>Khukuri Rum</td>
                        <td>12</td>
                        <td>10500</td>
                    </tr>
                    <tr>
                        <td>Khukuri Rum</td>
                        <td>12</td>
                        <td>10500</td>
                    </tr>
                    <tr>
                        <td>Khukuri Rum</td>
                        <td>12</td>
                        <td>10500</td>
                    </tr>
                </table>
            </div>




            <div class="col snapshoots">
                <div class="row top-row">
                    <div class="col">
                    <p class="row-heading">SNAPSHOOTS</p>
                    </div>
                    <div class="col offset-1">

                    <div class="dropdown">
                        <div class="btn-group">
                            <button class="btn btn-secondary btn-sm dropdown-toggle" type="button"
                                data-bs-toggle="dropdown" aria-expanded="false">
                                category
                            </button>
                            <ul class="dropdown-menu">
                                <li>i</li>
                                <li>my</li>
                            </ul>
                        </div>
                    </div>
                    </div>
                </div>
                <table class="table table-borderless">
                    <tr> 
                        <td><i class="fa-regular fa-calendar-days"></i></td>
                        <td>Most walkind day</td>
                        <td>Friday</td>
                    </tr>
                    <tr>
                        <td><i class="fa-regular fa-calendar-days"></i></td>
                        <td>Most walkind day</td>
                        <td>Friday</td>
                    </tr>
                       <tr>
                        <td><i class="fa-regular fa-calendar-days"></i></td>
                        <td>Most walkind day</td>
                        <td>Friday</td>
                    </tr>
                    <tr>
                        <td><i class="fa-regular fa-calendar-days"></i></td>
                        <td>Most walkind day</td>
                        <td>Friday</td>
                    </tr>
                    <tr>
                        <td><i class="fa-regular fa-calendar-days"></i></td>
                        <td>Most walkind day</td>
                        <td>Friday</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>


    <div class="container-fluid">
    <div class="row rev-brk1">
        <div class="col money-distribution">
                    <div class="top-row">
                        <p class="row-heading">MONEY DISTRIBUTION</p>
                    </div>
                    <div class="pie-chart">
                        <PieChart></PieChart>
                    </div>
        </div>


        <div class="col employees-status">
         <div class="top-row">
            <p class="row-heading">EMPLOYEES STATUS</p>
            </div>
            <div class="employee-progress">
                <div class="row individual-progress">
                <div class="col-1 icon-col">
                    <i class="fa-solid fa-person"></i>
                </div>
                <div class="col-8 progress-col">
                    <div class="progress">
                        <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0"
                            aria-valuemax="100" style="width: 80%;">
                      @*       <span class="sr-only">60% Complete</span> *@
                        </div>
                    </div>
                </div>
                <div class="col-3 day-col">
                    <span>291/365</span>
                </div>
            </div>
                            <div class="row individual-progress">
                <div class="col-1 icon-col">
                    <i class="fa-solid fa-person"></i>
                </div>
                <div class="col-8 progress-col">
                    <div class="progress">
                        <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0"
                            aria-valuemax="100" style="width: 99%;">
                 
                        </div>
                    </div>
                </div>
                <div class="col-3 day-col">
                    <span>361/365</span>
                </div>
            </div>
                            <div class="row individual-progress">
                <div class="col-1 icon-col">
                    <i class="fa-solid fa-person"></i>
                </div>
                <div class="col-8 progress-col">
                    <div class="progress">
                        <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0"
                            aria-valuemax="100" style="width: 10%;">

                        </div>
                    </div>
                </div>
                <div class="col-3 day-col">
                    <span>36/365</span>
                </div>
            </div>
             <div class="row individual-progress">
                <div class="col-1 icon-col">
                    <i class="fa-solid fa-person"></i>
                </div>
                <div class="col-8 progress-col">
                    <div class="progress">
                        <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0"
                            aria-valuemax="100" style="width: 10%;">

                        </div>
                    </div>
                </div>
                <div class="col-3 day-col">
                    <span>36/365</span>
                </div>
            </div>
                            <div class="row individual-progress">
                <div class="col-1 icon-col">
                    <i class="fa-solid fa-person"></i>
                </div>
                <div class="col-8 progress-col">
                    <div class="progress">
                        <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0"
                            aria-valuemax="100" style="width: 30%;">
                        
                        </div>
                    </div>
                </div>
                <div class="col-3 day-col">
                    <span>109/365</span>
                </div>
            </div>
                            <div class="row individual-progress">
                <div class="col-1 icon-col">
                    <i class="fa-solid fa-person"></i>
                </div>
                <div class="col-8 progress-col">
                    <div class="progress">
                        <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0"
                            aria-valuemax="100" style="width: 90%;">
                
                        </div>
                    </div>
                </div>
                <div class="col-3 day-col">
                    <span>328/365</span>
                </div>
            </div>
        </div>

    </div> 



        <div class="col top-selling">
             <div class="row top-row">
                 <div class="col">
            <p class="row-heading">TOP SELLING</p>
</div>
<div class="col offset-2\1">
            <div class="dropdown">
                <div class="btn-group">
                    <button class="btn btn-secondary btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown"
                        aria-expanded="false">
                        category
                    </button>
                    <ul class="dropdown-menu">
                        <li>i</li>
                        <li>my</li>
                    </ul>
                </div>
            </div>
</div>
        </div>


        <table class="table table-borderlesss">
            <tr>
                <th>Product Name</th>
                <th>Qty</th>
                <th>Amount</th>
            </tr>
            <tr>
                <td>Khukuri Rum</td>
                <td>12</td>
                <td>10500</td>
            </tr>
                        <tr>
                            <td>Khukuri Rum</td>
                            <td>12</td>
                            <td>10500</td>
                        </tr>
            <tr>
                <td>Khukuri Rum</td>
                <td>12</td>
                <td>10500</td>
            </tr>
                        <tr>
                            <td>Khukuri Rum</td>
                            <td>12</td>
                            <td>10500</td>
                        </tr>
            <tr>
                <td>Khukuri Rum</td>
                <td>12</td>
                <td>10500</td>
            </tr>
        </table>
        </div>  

    </div>
    </div>

    </div>

</div>

@inject BaseService BaseService

@code {
    [CascadingParameter]
    private GlobalState GlobalState { get; set; }

    private DashboardTransactionDto DashboardTransactionDto { get; set; } = new();

    protected override async Task OnInitializedAsync()
    {
        GlobalState = await BaseService.GetGlobalState();
        
        if (GlobalState.CompanyId is not null)
        {
            var parameters = new Dictionary<string, string>
{
{ "companyId", GlobalState.CompanyId.ToString() },
};

            var result = await
            BaseService.GetAsync<Derived<List<DashboardTransactionDto>>>("dashboard/get-sales-records",
            parameters);

            DashboardTransactionDto = result?.Result.FirstOrDefault() ?? new();

        }
    }
}